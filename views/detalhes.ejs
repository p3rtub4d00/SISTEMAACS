<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Ficha do Paciente</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css">
    <style>
        .ficha-label { font-weight: bold; color: #555; font-size: 0.9em; }
        .ficha-value { font-size: 1.1em; border-bottom: 1px solid #ccc; display: block; margin-bottom: 10px; }
        .alert-health { border: 2px solid red; color: red; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container mt-4">
        <div class="d-flex justify-content-between mb-4 no-print">
            <a href="/" class="btn btn-secondary">‚Üê Voltar</a>
            <div>
                <form action="/delete/<%= paciente._id %>" method="POST" style="display:inline;" onsubmit="return confirm('Tem certeza?');">
                    <button type="submit" class="btn btn-danger me-2">Excluir</button>
                </form>
                <button onclick="window.print()" class="btn btn-primary btn-lg">üñ®Ô∏è IMPRIMIR FICHA</button>
            </div>
        </div>

        <div class="card p-4">
            <div class="text-center mb-4 border-bottom pb-3">
                <h2 class="fw-bold">FICHA DE CADASTRO INDIVIDUAL - ACS</h2>
                <p>Secretaria Municipal de Sa√∫de</p>
            </div>

            <div class="row">
                <div class="col-8">
                    <span class="ficha-label">NOME COMPLETO:</span>
                    <span class="ficha-value"><%= paciente.nome %></span>
                </div>
                <div class="col-4">
                    <span class="ficha-label">DATA NASCIMENTO:</span>
                    <span class="ficha-value">
                        <%= new Date(paciente.dataNascimento).toLocaleDateString('pt-BR', {timeZone: 'UTC'}) %>
                    </span>
                </div>
            </div>

            <div class="row mt-2">
                <div class="col-6">
                    <span class="ficha-label">NOME DA M√ÉE:</span>
                    <span class="ficha-value"><%= paciente.nomeMae || 'N√£o informado' %></span>
                </div>
                <div class="col-6">
                    <span class="ficha-label">CNS (SUS):</span>
                    <span class="ficha-value"><%= paciente.cns %></span>
                </div>
            </div>

            <div class="row mt-2 bg-light p-2 border rounded">
                <div class="col-3">
                    <span class="ficha-label">MICRO√ÅREA:</span>
                    <span class="ficha-value"><%= paciente.microarea %></span>
                </div>
                <div class="col-3">
                    <span class="ficha-label">FAM√çLIA N¬∫:</span>
                    <span class="ficha-value"><%= paciente.familiaId || '-' %></span>
                </div>
                <div class="col-6">
                    <span class="ficha-label">ENDERE√áO:</span>
                    <span class="ficha-value"><%= paciente.endereco %>, <%= paciente.numero %> - <%= paciente.bairro %></span>
                </div>
            </div>

            <div class="mt-4">
                <h5 class="border-bottom">CONDI√á√ïES DE SA√öDE ACOMPANHADAS</h5>
                <div class="row mt-3 text-center">
                    <div class="col-3">
                        <div class="p-2 <%= paciente.hipertenso ? 'alert-health' : 'border' %>">
                            HIPERTENSO: <%= paciente.hipertenso ? 'SIM' : 'N√ÉO' %>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="p-2 <%= paciente.diabetico ? 'alert-health' : 'border' %>">
                            DIAB√âTICO: <%= paciente.diabetico ? 'SIM' : 'N√ÉO' %>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="p-2 <%= paciente.gestante ? 'alert-health' : 'border' %>">
                            GESTANTE: <%= paciente.gestante ? 'SIM' : 'N√ÉO' %>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="p-2 <%= paciente.acamado ? 'alert-health' : 'border' %>">
                            ACAMADO: <%= paciente.acamado ? 'SIM' : 'N√ÉO' %>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-4">
                <span class="ficha-label">OBSERVA√á√ïES DO AGENTE:</span>
                <div class="border p-3 mt-2" style="min-height: 100px; background: #fff;">
                    <%= paciente.observacoes || 'Nenhuma observa√ß√£o registrada.' %>
                </div>
            </div>
            
            <div class="mt-5 text-center pt-4 border-top">
                <p>_______________________________________________________</p>
                <p>Assinatura do Respons√°vel / Agente Comunit√°rio</p>
            </div>
        </div>
    </div>
</body>
</html>
